
<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>EPA Game v7 Mobile</title>
<style>
body { font-family: sans-serif; margin: 0; background: #ffeef3; }
header { background: pink; padding: 10px; text-align: center; font-weight: bold; font-size: 1.5em; }
.container { padding: 10px; max-width: 600px; margin: auto; }
label { display: block; margin-top: 10px; font-weight: bold; }
input { width: 100%; padding: 8px; margin-top: 5px; }
button { padding: 10px; background: hotpink; border: none; color: white; font-size: 1em; border-radius: 5px; margin-top: 15px; width: 100%; }
.hidden { display: none; }
.question { background: white; padding: 10px; border-radius: 5px; margin-top: 15px; }
.answers button { width: 100%; margin-top: 10px; padding: 10px; font-size: 1em; border-radius: 5px; border: none; }
.teacher { background: #f8cdd1; }
.learner { background: #d3f5d3; }
.over { background: #fde4cf; }
</style>
</head>
<body>
<header>EPA Game v7</header>
<div class="container" id="startScreen">
  <label>æ•™å¸«å§“åï¼ˆå¿…å¡«ï¼‰</label>
  <input id="teacherName" />
  <label>å–®ä½ï¼ˆå¿…å¡«ï¼‰</label>
  <input id="unitName" />
  <button onclick="startGame()">é–‹å§‹éŠæˆ²</button>
</div>

<div class="container hidden" id="gameScreen">
  <div id="instruction" style="background: #fff3cd; padding: 8px; border-radius: 5px;">
    ä»¥ä¸‹å°è©±æƒ…å¢ƒï¼Œä½ è¦ºå¾—æ˜¯ä»¥èª°ç‚ºä¸­å¿ƒå‘¢ï¼Ÿ <a href="#" onclick="alert(spiritTalk);return false;">é»æˆ‘çœ‹ç©æ³•</a>
  </div>
  <div id="questionBox" class="question"></div>
  <div class="answers">
    <button class="teacher" onclick="answer('teacher')">ğŸ‘©â€ğŸ« æ•™å¸«ä¸­å¿ƒ</button>
    <button class="learner" onclick="answer('learner')">ğŸŒ± å­¸å“¡ä¸­å¿ƒï¼ˆè²¬ä»»åˆ†ç´šï¼‰</button>
    <button class="over" onclick="answer('over')">ğŸ’— éåº¦åŒ…å®¹ï¼ˆä¸å¥åº·ï¼‰</button>
  </div>
</div>

<script>
const GAS_URL = "REPLACE_WITH_YOUR_SCRIPT_URL";
const spiritTalk = `æˆ‘ç›¸ä¿¡æˆ‘æ˜¯ä¸€ä½ç¥éšŠå‹è€å¸«ï¼Œå­¸å¦¹ä¸€å®šèƒ½æ¥ä½æˆ‘å‚³çš„çƒï¼
å‡¡äº‹ç™¼ç”Ÿçš†æ˜¯å¤©åŠ©æˆ‘ä¹Ÿï½
æ”¶å¥½æˆ‘çš„ç™½çœ¼ï¼Œå£“ä½æˆ‘çš„æ·±å‘¼å¸ï¼Œè®“ä»–ç›¸ä¿¡è‡ªå·±é‚„æœ‰æ•‘ï¼
ä¸è¦è¡¨éœ²ã€ä¸è¦æ”¾æ£„ï¼Œæˆ‘å€‘éœ€è¦æ–°é®®çš„å¤¥ä¼´ä¸€èµ·ä¸Šç­ã€‚
æƒ³æƒ³æˆ‘çš„æ’ç­ã€æƒ³æƒ³æˆ‘çš„ OFF Dayï½
æˆ‘å¯ä»¥ï¼Œä»–ä¹Ÿä¸€å®šå¯ä»¥ï¼`;

const L1 = [
  { id:"L1-01", scene:"äº¤ç­å‰ã€‚", t:"æ˜¨å¤©è¨è«–éäº¤ç­ï¼Œä»Šå¤©äº¤ç­å‰æˆ‘å€‘å…ˆç·´ä¸€æ¬¡ï¼Œæ”¾è¼•é¬†ã€‚", s:"å¥½ã€‚", a:"teacher" }
];
let currentQuestionIndex = 0;
let playerName = "";
let playerUnit = "";
let sessionId = Date.now().toString();

function startGame(){
  playerName = document.getElementById("teacherName").value.trim();
  playerUnit = document.getElementById("unitName").value.trim();
  if(!playerName || !playerUnit){ alert("è«‹å¡«å¯«å§“åèˆ‡å–®ä½"); return; }
  document.getElementById("startScreen").classList.add("hidden");
  document.getElementById("gameScreen").classList.remove("hidden");
  showQuestion();
}

function showQuestion(){
  if(currentQuestionIndex >= L1.length){
    alert("éŠæˆ²çµæŸï¼æ„Ÿè¬åƒåŠ ");
    return;
  }
  const q = L1[currentQuestionIndex];
  document.getElementById("questionBox").innerHTML = `<b>${q.scene}</b><br>ğŸ‘©â€ğŸ« è€å¸«ï¼š${q.t}<br>ğŸŒ± å­¸å“¡ï¼š${q.s}`;
}

function answer(choice){
  const q = L1[currentQuestionIndex];
  fetch(GAS_URL, {
    method: "POST",
    mode: "no-cors",
    body: JSON.stringify({
      session_id: sessionId,
      name: playerName,
      unit: playerUnit,
      level: 1,
      item_id: q.id,
      chosen: choice,
      correct: (choice === q.a) ? 1 : 0,
      user_agent: navigator.userAgent
    })
  });
  currentQuestionIndex++;
  showQuestion();
}
</script>
</body>
</html>
